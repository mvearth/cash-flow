using Terra.CashFlow.Core.Domain.Interfaces;

namespace Terra.CashFlow.Core.Domain;

public class Account : IEntity
{
    public Guid Id { get; private set; }

    public Guid CustomerId { get; private set; }

    public decimal Amount { get; private set; }

    public Account(Guid customerId)
    {
        CustomerId = customerId;
        Amount = 0;
    }

    public void MakeDeposits(IEnumerable<Deposit> deposits) =>
        Amount += deposits
            .Where(d => d.AccountId == Id && d.IsReadyToCash())
            .Sum(d => d.Amount);
}